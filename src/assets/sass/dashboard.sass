@use 'vars' as v
@use 'fonts'
@use 'mixins' as m
@use "sass:color"

*
    box-sizing: border-box
    padding: 0
    margin: 0

input
    border: none
    &:focus
        outline: none

// PAGE
.page
    font-family: 'DM Sans', sans-serif
    background-color: v.$background
    color: v.$text
    &__sidebar
        position: fixed
        padding-left: 26px
    &__main
        margin-left: 248px

// BLOCKS
.link
    color: inherit
    text-decoration: inherit

.sidebar
    display: flex
    flex-direction: column

    width: 248px
    height: 100%
    background-color: v.$primary1

    font-family: 'DM Sans'
    font-size: 14px
    font-weight: 500
    line-height: 18px
    &__logo
        display: flex
        margin-top: 30px
        margin-bottom: 35px
    &__logo-img
        display: block
        width: 109px
        height: auto

.nav
    display: flex
    flex-direction: column
    height: 100%
    &__controls
        margin-top: auto
    &__link
        display: flex
        // flex-direction: row
        align-content: center

        border-radius: 6px

        width: 174px
        padding: 7px
        padding-left: 8px
        margin-bottom: 17px

        filter: opacity(0.5)
        background-color: transparent
        &:hover
            filter: opacity(0.75)
    &__img
        margin-right: 8px
    &_current-link
        filter: none
        background-color: v.$link-active

.header
    display: flex
    height: 78px
    background-color: v.$primary1

    padding-left: 30px
    padding-right: 30px
    &__searchbar
        margin-top: auto
        margin-bottom: auto
    &__user
        margin-left: auto
        margin-top: auto
        margin-bottom: auto

$header_inner_height: 46px

.searchbar
    display: flex
    width: 358px
    height: $header_inner_height
    background-color: v.$background
    border-radius: 8px
    &__icon
        margin-left: auto
        margin-right: auto
        width: 20px
        height: auto
    &__form
        margin-left: auto
    &__input
        width: 306px
        height: 100%
        background-color: transparent
        caret-color: v.$caret-color

        color: v.$text
        font-family: 'DM Sans'
        font-style: normal
        font-weight: 500
        font-size: 16px

.user
    display: flex
    justify-content: flex-end
    align-items: center

    width: 110px
    height: $header_inner_height
    &__profile
        margin-left: 39px

.profile
    position: relative
    overflow: hidden
    border-radius: 50%

    width: $header_inner_height
    height: $header_inner_height
    &__img
        height: 100%
        width: auto
        transform: translate(var(--avatar_translate, 0)) scale(var(--avatar_scale, 1))

.content
    display: grid
    column-gap: 25px
    row-gap: 25px
    justify-items: center

    grid-template-columns: repeat(12, 1fr)
    grid-template-rows: 266px 332px 236px

    padding: 30px
    width: 100%

// Primary3     purple
// secondary1   light red
// secondary2   yellow


         

.grid
    border-radius: 14px
    background-color: v.$primary1
    color: v.$text
    // general modifiers
    &_3
        grid-column: span 3
        width: 232px
    &_4
        grid-column: span 4
        width: 318px
    &_6
        grid-column: span 6
        width: 488px
    &_meter
        @include m.flexc
    // elem
    &__logo
        margin-top: 22.5px
    &__circle
        position: absolute
        width: 40px
        height: 40px
        border-radius: 50%
        opacity: 0.1
    &__icon
        width: 40px
        height: 40px
    &__name
        visibility: hidden
        margin-top: 10px
        font-size: 24px
        font-weight: 700
    &__progress
        @include m.flexc
        width: 100%
        margin-top: 30px
    // АКТИВНОЕ СОСТОЯНИЕ
    &.grid_active   // Здесь двойной селектор (.grid.grid_active) нужен, так как ниже идет правило, которое по специфичности перебьет в ином случае
        .grid__name
            visibility: visible
        .grid__circle
            background-color: v.$text
        .grid__icon
            background-color: v.$text
        .progress__empty path
            stroke:  v.$text
            stroke-opacity: 0.1
        .progress__current path
            stroke:  v.$text


// SPECIFIC BLOCKS
.energy
    // inactive state
    .grid__circle
        background-color: v.$primary3
    .grid__icon
        mask-image: url('/assets/img/energy.svg')
        -webkit-mask-image: url('/assets/img/energy.svg')
        background-color: v.$primary3
    .progress__current path
        stroke: v.$primary3
    // active state
    &.grid_active
        background-color: v.$primary3

.range
    // inactive state
    .grid__circle
        background-color: v.$secondary1
    .grid__icon
        mask-image: url('/assets/img/range.svg')
        -webkit-mask-image: url('/assets/img/range.svg')
        background-color: v.$secondary1
    .progress__current path
        stroke: v.$secondary1
        // active state
    &.grid_active
        background-color: v.$secondary1

.break-fluid
    // inactive state
    .grid__circle
        background-color: v.$primary3
    .grid__icon
        mask-image: url('/assets/img/break_fluid.svg')
        -webkit-mask-image: url('/assets/img/break_fluid.svg')
        background-color: v.$primary3
    .progress__current path
        stroke: v.$primary3
    // active state
    &.grid_active
        background-color: v.$primary3

.tire-wear
    // inactive state
    .grid__circle
        background-color: v.$secondary2
    .grid__icon
        mask-image: url('/assets/img/energy.svg')
        -webkit-mask-image: url('/assets/img/energy.svg')
        background-color: v.$secondary2
    .progress__current path
        stroke: v.$secondary2
    // active state
    &.grid_active
        background-color: v.$secondary2

.progress
    &__bar
        position: absolute
        width: 112px
        height: 95px
    &__empty
        position: absolute
        path
            stroke: v.$background
    &__current
        position: absolute
    &__percentage
        margin-top: 36px
        font-size: 24px
        font-weight: 700

.miles-stats
    @include m.flexc
    font-size: 20px
    font-weight: 400
    padding: 15px 35px

    &__header
        align-self: flex-start
        margin-bottom: 24px

    &__span
        font-weight: 700

    &__controls
        display: flex
        justify-content: space-between
        align-items: flex-end
        width: 100%

        margin-bottom: 14px

    &__timespan
        display: flex
        justify-content: space-between

    &__miles
        font-size: 14px
        font-weight: 700
        color: v.$text-inactive

    &__day, &__week, &__month
        appearance: none

        + label
            font-size: 10px
            font-weight: 700
            padding: 3.5px 12px
            border-radius: 24px
            color: v.$dark5
            margin: 0 2px
        
        + label:hover
            outline: 2px solid v.$secondary3
            background-color: v.$secondary3transparent
            cursor: pointer

        &:checked + label
            background-color: v.$secondary3
            color: v.$text

    &__chart
        display: flex
        justify-content: space-between
        width: 100%
        flex-grow: 1

    &__chart-item
        @include m.flexc
        position: relative
        justify-content: flex-end
        align-items: center
        width: 40px

        &:last-child
            .miles-stats__spacer
                display: none
        
        &_hovered
            .miles-stats__column
                background-color: v.$secondary3

    &__spacer
        position: absolute
        content: ''
        right: -12px
        bottom: 25px
        width: 2px
        height: 193px
        background-color: v.$spacers

    &__column
        $height: 193px

        position: relative
        width: 28px
        height: $height
        background-color: v.$background
        margin-bottom: 7px
        transition: background-color 0.05s

    &__item-name
        color: v.$dark4
        font-size: 14px
        font-weight: 400

.tooltip
    visibility: hidden
    position: absolute
    border-radius: 5px
    background-color: v.$tooltip

    width: 58px
    height: 32px
    padding: 2px 8px
    z-index: 1000

    font-size: 10px
    font-weight: 700
    transform: translateX(10px)
    &__value
        position: relative
        left: 9px
    &__value::before
        content: ''
        position: absolute
        left: -9px
        top: 3px
        width: 6px
        height: 6px
        border-radius: 50%
        background-color: v.$secondary3